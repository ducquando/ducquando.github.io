extends layout

block heading
  link(rel="stylesheet", href="./stylesheets/works.css")

block content
  .main-container
    img(src="/assets/graphics/Works.svg", alt="Works").width-90

    #work-container 
      //- Filter and Sort
      #tool-container.width-90 
        //- Filtering
        .tool-section-about
          .tool-title 
            svg(xmlns="http://www.w3.org/2000/svg" width="23" height="18" viewBox="0 -1 15 15" fill="none")
              path(d=icons["Field"])
            h2 Field
          #filter-container
            each field in workField
              .filter-section(id=field["ID"])
                p.button-text= field["Alias"]
                svg(xmlns="http://www.w3.org/2000/svg" width="10" height="8" viewBox="0 0 10 8" fill="none")
                  path(d=icons["Check"])        
        //- Sorting
        .tool-section-about
          .tool-title 
            svg(xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" fill="none")
              path(d=icons["Sort"])
            h2 Sort 
          ul#sort-container 
            li.sort-section#curated
              p.button-text Curated
            li.sort-section#name 
              p.button-text Name
            li.sort-section#recent 
              p.button-text Recent
      
      .divider-post

      //- Post section
      #post-container.width-90
        each id in workFilter[workParams["sort"]]["Index"]
          - var workInclude = ["se","pd","gd","ds"].map((e) => (workParams[e] & workField[e]["PostID"].includes(id))).reduce((m, o) => m + o) >= 1;
          if workInclude
            a(href="/works" + workPost[id]["Link"], style="background-image: url(" + workPost[id]["Thumbnail"] + ")").post-section.width-30
              .post-overlay
              .post-title
                h3= workPost[id]["Name"]
                .post-items
                  svg(xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none")
                    path(d=icons["Field"])
                  .listing
                    each field in workField
                      if field["PostID"].includes(id)
                        p.caption= field["Name"]
                .post-items
                  svg(xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16" fill="none")
                    path(d=icons["Calendar"])
                  p.caption #{workPost[id]["Duration"]} (#{workPost[id]["Date"]})
                .post-items
                  svg(xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 16 16" fill="none")
                    path(d=icons["Tag"])
                  p.caption= workPost[id]["Tags"]
              .post-view 
                svg(xmlns="http://www.w3.org/2000/svg" width="18" height="12" viewBox="0 0 18 12" fill="none")
                  path(d=icons["Eye"])
                p.button-text View project

block scripts
  script(src="/javascripts/workFilter.js") 
          